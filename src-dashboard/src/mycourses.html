
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Courses - Aura Learning Dashboard</title>
  <link rel="stylesheet" href="notestab.css">
  <link rel="stylesheet" href="aura.css">
  <link rel="stylesheet" href="mycourses.css">
  <link rel="stylesheet" href="profile-picture-styler.css">

  <script src="mycoursestocoursepage.js"></script>
  <script src="coursepage.js"></script>
  <script src="documentholder.js"></script>
  <script src="theme-init.js"></script>
  <script src="examdate.js"></script>
</head>
<body>
  <div class="dashboard">
      <div class="body">
        <div class="content-wrapper">
          <div class="layout-container">
            <div class="sidebar-column">
              <!-- Stars in night mode -->
              <div class="star star-1"></div>
              <div class="star star-2"></div>
              <div class="star star-3"></div>
              <div class="star star-4"></div>
              <div class="star star-5"></div>
              <div class="star star-6"></div>
              
              <aside class="sidebar">
                <div class="logo-container">
                  <img loading="lazy" src="aura_head_logo.PNG" class="logo-image" alt="Aura logo" />
                  <div class="logo-text">AURA</div>
                </div>
                <div class="user-profile">
                  <div class="user-info">
                    <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/9dbfea57b8a729137111c79719a1c4f8e5573959547359abb4b9cbb79dbfb1bf?apiKey=5b35dfe34207418398a5304200905620&" class="user-avatar" alt="User avatar" />
                    <div class="user-details">
                      <div class="user-name">Sarah Johnson</div>
                    </div>
                  </div>
                </div>
                <nav class="main-nav">
                  <ul class="nav-list">
                    <li class="nav-item">
                      <div class="nav-link">
                        <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/efcf297df397c9b38745d56455fc5a0f4643758fb07f9317d4487646d362f924?apiKey=5b35dfe34207418398a5304200905620&" class="nav-icon" alt="Dashboard icon" />
                        <span class="nav-text">Dashboard</span>
                      </div>
                    </li>
                    <li class="nav-item active">
                      <div class="nav-link">
                        <div class="nav-icon-wrapper">
                          <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/7e4782e6f1f5afa6efe604f03bf1347075561660a5ea58537e1a7208704514c4?apiKey=5b35dfe34207418398a5304200905620&" class="nav-icon" alt="My Courses icon" />
                        </div>
                        <div class="nav-text">My Courses</div>
                      </div>
                    </li>
                    <li class="nav-item">
                      <div class="nav-link">
                        <div class="nav-icon-wrapper">
                          <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/9447e2aa5c597dcd39d0a9bc7b4cabdf945a9cdbd8076eff279bc84f66090d2d?apiKey=5b35dfe34207418398a5304200905620&" class="nav-icon" alt="Calendar icon" />
                        </div>
                        <div class="nav-text">Calendar</div>
                      </div>
                    </li>
                    <li class="nav-item">
                      <div class="nav-link">
                        <div class="nav-icon-wrapper">
                          <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/6d682b869a1b0ede1e946d876b2ff1a8b81f16cec5c13220a34e44e9fc9e50eb?apiKey=5b35dfe34207418398a5304200905620&" class="nav-icon" alt="Progress Analytics icon" />
                        </div>
                        <div class="nav-text">Progress Analytics</div>
                      </div>
                    </li>
                    <li class="nav-item">
                      <div class="nav-link">
                        <div class="nav-icon-wrapper">
                          <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/5b35dfe34207418398a5304200905620/be475ce0c5161593bab6cf3e27d8c506d27699bd1c854b69aceabe63f7401887?apiKey=5b35dfe34207418398a5304200905620&" class="nav-icon" alt="Settings icon" />
                        </div>
                        <div class="nav-text">Settings</div>
                      </div>
                    </li>
                    <li class="nav-item">
                      <div class="nav-link">
                        <div class="nav-icon-wrapper">
              
                          <img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVR4nN2UWwrCMBBFDxW7ALsb0TUoPtotqXUXii7JanURPv4jA/FHEzO2+fLChRIm95RJMvDvSoEC2AEV8LCu7FpuaxppClwAE/AZmPwS3AHWimDz5hJINIAm4cZ6qWmLaemxLzxV9LwHZIGa2nfwheLvMgVAPHcB9hHaY6y3LsApIqByAW6KjX1goKiTrA/dFRtfCtVdcegYEXBwAXYRARsXII8ImLkAqR1c3zYOgKHioXXxaBLhio4IqGwRvkAhGbmrhpM04QeNbT9DwbWmLT517eCS2SJ3Wx6jWL5lTW6L90D/Q08RqyheiFaw0QAAAABJRU5ErkJggg==" alt="info"></img>
                        </div>
                        <div class="nav-text">About Us</div>
                      </div>
                    </li>
                  </ul>
                </nav>

              </aside>
              
            </div>
            <div class="main-content-column">
              <div class="main-content">
                <main class="courses-main">
                  <header class="dashboard-header">
                    <div class="header-content">
                      <div class="welcome-section">
                        <div class="page-title">My Courses</div>
                      </div>
                      <div class="add-course-btn">
                        <button class="btn-primary" id="addNewCourseBtn">
                          <span class="plus-icon">+</span> Add New Course
                        </button>
                      </div>
                    </div>
                  </header>
                  
                  <div class="courses-content">
                    <div class="courses-grid-container">
                      
                    </div>
                  </div>
                </main>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<script src="aura.js"></script>
<!-- Add Course Modal -->
<div id="addCourseModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Add New Course</h2>
      <p>Set up your course details to get started</p>
    </div>
    
    <div class="modal-body">
      <div class="form-group">
        <label for="courseName">Course Name</label>
        <input type="text" id="courseName" class="form-control" placeholder="e.g., MAT 140">
      </div>
      
      <div class="form-group">
        <label for="subjectArea">Subject Area</label>
        <div class="select-wrapper">
          <select id="subjectArea" class="form-control">
            <option value="mathematics">Mathematics</option>
            <option value="computer-science">Computer Science</option>
            <option value="science">Science</option>
            <option value="languages">Languages</option>
            <option value="humanities">Humanities</option>
          </select>
          <div class="select-arrow">&#9662;</div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group half">
          <label for="examDate">Exam Date</label>
          <div class="date-input-wrapper">
            <input type="text" id="examDate" class="form-control" placeholder="mm/dd/yyyy">
            <button class="calendar-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNhbGVuZGFyIj48cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjQiIHJ4PSIyIiByeT0iMiIvPjxsaW5lIHgxPSIxNiIgeTE9IjIiIHgyPSIxNiIgeTI9IjYiLz48bGluZSB4MT0iOCIgeTE9IjIiIHgyPSI4IiB5Mj0iNiIvPjxsaW5lIHgxPSIzIiB5MT0iMTAiIHgyPSIyMSIgeTI9IjEwIi8+PC9zdmc+" alt="Calendar"></button>
          </div>
        </div>
        
        <div class="form-group half">
          <label for="studyHours">Daily Study Hours</label>
          <input type="number" id="studyHours" class="form-control" placeholder="2" min="0" max="24">
        </div>
      </div>
      
      <div class="form-group">
        <label for="knowledgeLevel">Current Knowledge Level</label>
        <div class="range-container">
          <input type="range" id="knowledgeLevel" min="0" max="100" value="0" class="knowledge-slider">
          <span class="range-value">0%</span>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button id="cancelBtn" class="btn-secondary">Cancel</button>
      <button id="createCourseBtn" class="btn-primary">
        <span class="plus-icon">+</span> Create Course
      </button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('addCourseModal');
  const addCourseBtn = document.getElementById('addNewCourseBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const createCourseBtn = document.getElementById('createCourseBtn');
  const knowledgeSlider = document.getElementById('knowledgeLevel');
  const rangeValue = document.querySelector('.range-value');
  const coursesGridContainer = document.querySelector('.courses-grid-container');
  
  // Name of cache
  const CACHE_NAME = 'aura-courses-cache';
  // Array to store courses in memory
  let courses = [];
  
  // Initialize the knowledge slider
  rangeValue.textContent = knowledgeSlider.value + '%';
  knowledgeSlider.style.background = `linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) ${knowledgeSlider.value}%, #e5e7eb ${knowledgeSlider.value}%)`;

  // Load existing courses on page load
  loadCoursesFromCache();

  // Slider event listener
  knowledgeSlider.addEventListener('input', function() {
    const value = this.value;
    rangeValue.textContent = value + '%';
    this.style.background = `linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) ${value}%, #e5e7eb ${value}%)`;
  });

  // Open modal when "Add New Course" is clicked
  addCourseBtn.addEventListener('click', function() {
    modal.style.display = 'flex';

    // Reset the form when opening for a new course
    document.getElementById('courseName').value = '';
    document.getElementById('examDate').value = '';
    document.getElementById('studyHours').value = '';
    document.getElementById('knowledgeLevel').value = 0;
    rangeValue.textContent = '0%';
    knowledgeSlider.style.background = `linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) 0%, #e5e7eb 0%)`;
    createCourseBtn.textContent = '+ Create Course';
    
    // Remove any existing event listeners and add new one for creating course
    createCourseBtn.replaceWith(createCourseBtn.cloneNode(true));
    document.getElementById('createCourseBtn').addEventListener('click', createCourse);
  });

  // Close modal when "Cancel" is clicked
  cancelBtn.addEventListener('click', function() {
    modal.style.display = 'none';
  });

  // Close modal when clicking outside of it
  window.addEventListener('click', function(event) {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  });

  // Function to create a new course
  function createCourse() {
    const courseName = document.getElementById('courseName').value;
    const subjectArea = document.getElementById('subjectArea').value;
    const examDate = document.getElementById('examDate').value;
    const studyHours = document.getElementById('studyHours').value;
    const knowledgeLevel = document.getElementById('knowledgeLevel').value;
    
    // Validating course name input
    if (!courseName.trim()) {
      alert('Please enter a course name');
      return;
    }

    // Create a unique ID for each course
    const courseId = Date.now().toString();
    
    // Create course object
    const course = {
      id: courseId,
      name: courseName,
      subject: subjectArea,
      examDate: examDate,
      studyHours: studyHours,
      knowledgeLevel: knowledgeLevel
    };
    
    // Add to courses array
    courses.push(course);
    
    // Save to cache
    saveCoursesToCache();
    
    // Add to the UI
    addCourseToUI(course);
    
    // Close the modal
    modal.style.display = 'none';
  }
  
  // Function to save courses to Cache API
  function saveCoursesToCache() {
    // Check if Cache API is supported
    if ('caches' in window) {
      const coursesBlob = new Blob([JSON.stringify(courses)], { type: 'application/json' });
      const coursesResponse = new Response(coursesBlob);
      
      caches.open(CACHE_NAME).then(cache => {
        cache.put('/courses-data', coursesResponse);
      }).catch(error => {
        console.error('Error saving to cache:', error);
        // Fallback to localStorage if cache fails
        localStorage.setItem('courses', JSON.stringify(courses));
      });
    } else {
      // Fallback for browsers that don't support Cache API
      localStorage.setItem('courses', JSON.stringify(courses));
    }
  }
  
  // Function to load courses from Cache API
  function loadCoursesFromCache() {
    // Check if Cache API is supported
    if ('caches' in window) {
      caches.open(CACHE_NAME).then(cache => {
        return cache.match('/courses-data');
      }).then(response => {
        if (response) {
          return response.json();
        } else {
          // If no data in cache, try localStorage as fallback
          const localData = localStorage.getItem('courses');
          return localData ? JSON.parse(localData) : [];
        }
      }).then(data => {
        courses = data;
        loadCourses();
      }).catch(error => {
        console.error('Error loading from cache:', error);
        // Try localStorage as fallback
        const localData = localStorage.getItem('courses');
        courses = localData ? JSON.parse(localData) : [];
        loadCourses();
      });
    } else {
      // Fallback for browsers that don't support Cache API
      const localData = localStorage.getItem('courses');
      courses = localData ? JSON.parse(localData) : [];
      loadCourses();
    }
  }
  
  // Function to add a course card to the UI
  function addCourseToUI(course) {
    const courseCard = document.createElement('div');
    courseCard.className = 'course-card';
    courseCard.dataset.id = course.id;
    
    courseCard.innerHTML = `
      <div class="course-header">
        <div class="course-title">${course.name}</div>
        <div class="course-progress-badge progress-blue">${course.knowledgeLevel}%</div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill blue" style="width: ${course.knowledgeLevel}%;"></div>
      </div>
      <div class="course-details">
        <div class="course-quiz">
          <span class="quiz-icon">ðŸ“…</span>
          <span class="quiz-date">Next Quiz: ${course.examDate}</span>
        </div>
      </div>
      <div class="course-actions">
        <button class="edit-btn">Edit</button>
        <button class="delete-btn">Delete</button>
      </div>
    `;
    
    coursesGridContainer.appendChild(courseCard);
    
    // Add event listener for delete button
    const deleteBtn = courseCard.querySelector('.delete-btn');
    deleteBtn.addEventListener('click', function() {
      deleteCourse(course.id);
    });
    
    // Add event listener for edit button
    const editBtn = courseCard.querySelector('.edit-btn');
    editBtn.addEventListener('click', function() {
      openEditModal(course.id);
    });
  }
  
  // Function to load courses from memory to UI
  function loadCourses() {
    // Clear existing course cards
    coursesGridContainer.innerHTML = '';
    
    // Add each course to the UI
    courses.forEach(course => {
      addCourseToUI(course);
    });
  }
  
  // Function to delete a course
  function deleteCourse(courseId) {
    // Filter out the course with the specified ID
    courses = courses.filter(course => course.id !== courseId);
    
    // Save updated courses array to cache
    saveCoursesToCache();
    
    // Remove the course card from the UI
    const courseCard = document.querySelector(`.course-card[data-id="${courseId}"]`);
    if (courseCard) {
      courseCard.remove();
    }
  }
  
  // Function to open edit modal for a course
  function openEditModal(courseId) {
    // Find the course with the specified ID
    const course = courses.find(course => course.id === courseId);
    
    if (!course) return;
    
    // Pre-fill the form with course details
    document.getElementById('courseName').value = course.name;
    document.getElementById('subjectArea').value = course.subject;
    document.getElementById('examDate').value = course.examDate;
    document.getElementById('studyHours').value = course.studyHours;
    document.getElementById('knowledgeLevel').value = course.knowledgeLevel;
    
    // Update the slider
    rangeValue.textContent = course.knowledgeLevel + '%';
    knowledgeSlider.style.background = `linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) ${course.knowledgeLevel}%, #e5e7eb ${course.knowledgeLevel}%)`;
    
    // Show the modal
    modal.style.display = 'flex';
    
    // Update the create button text
    const createBtn = document.getElementById('createCourseBtn');
    createBtn.textContent = 'Update Course';
    
    // Remove existing event listeners and add new one for updating
    createBtn.replaceWith(createBtn.cloneNode(true));
    document.getElementById('createCourseBtn').addEventListener('click', function() {
      updateCourse(courseId);
    });
  }
  
  // Function to update a course
  function updateCourse(courseId) {
    // Find the index of the course with the specified ID
    const courseIndex = courses.findIndex(course => course.id === courseId);
    
    if (courseIndex === -1) return;
    
    // Update the course details
    courses[courseIndex] = {
      ...courses[courseIndex],
      name: document.getElementById('courseName').value,
      subject: document.getElementById('subjectArea').value,
      examDate: document.getElementById('examDate').value,
      studyHours: document.getElementById('studyHours').value,
      knowledgeLevel: document.getElementById('knowledgeLevel').value
    };
    
    // Save updated courses array to cache
    saveCoursesToCache();
    
    // Reload courses to refresh the UI
    loadCourses();
    
    // Close the modal
    modal.style.display = 'none';
  }
});
</script>
<script src="common.js"></script>
<script src="profile-picture-manager.js"></script>


</body>
</html>